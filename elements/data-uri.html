<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="data-uri" attributes="data uri">
  <script>
  Polymer('data-uri', {
    dataChanged: function() {
      this.uri = 'data:text/plain;charset=utf-8;base64,' +
                  this.encode(this.data);
    },
    encode: function(str) {
      // utf8 to base64
      // https://developer.mozilla.org/en-US/docs/Web/API/window.btoa
      return window.btoa(unescape(encodeURIComponent(str)));
    },
    decode: function(str) {
      // base64 to utf8
      return decodeURIComponent(escape(window.atob(str)));
    }
  });
  </script>
</polymer-element>